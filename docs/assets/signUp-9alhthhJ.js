import"./tailwind-ouJN7DSI.js";import{r as l,a as c,t as B}from"./css-LUmow4Y_.js";import{g as t,a as V}from"./delay-g6vF19wW.js";import{s as p}from"./storage-eNv634Ip.js";import{p as U}from"./pocketbase-UOLpUAtS.js";const L=t(".button-goBack"),E=t(".button-moveBack"),v=t(".signUp-container"),I=t(".signUp-form-before");function C(){history.back()}function P(){v.style.transform="translateX(0%)"}L.addEventListener("click",C);E.addEventListener("click",P);I.addEventListener("submit",e=>{e.preventDefault(),v.style.transform="translateX(-50%)"});const x=document.getElementById("phoneNumber"),s=t(".signUp-button-verify"),a=document.getElementById("agree"),A=/^010\d{4}\d{4}$/,d=t(".signUp-errorMsg");function S(e){const n=e.target.value;console.log(n),A.test(n)?(l(s,"text-gray-500"),c(s,"signUp-verify-valid"),s.removeAttribute("disabled"),d.style.display="none"):(l(s,"signUp-verify-valid"),s.setAttribute("disabled",""),d.style.display="block",d.textContent="핸드폰 번호를 제대로 입력해주세요")}x.addEventListener("input",S);const w=Math.floor(Math.random()*9e5)+1e5;sessionStorage.setItem("verifyNumber",w);const b=sessionStorage.getItem("verifyNumber");function N(){Array.from(s.classList).includes("signUp-verify-valid")&&alert(b)}async function M(){const e=t(".signUp-input-phoneNumber").value;if((await U.collection("users").getFullList("phoneNumber")).map(u=>u.phoneNumber).includes(e))alert("이미 회원가입 된 번호입니다. 로그인 페이지로 이동합니다! 😃"),window.location.href="/src/pages/login/";else{N();const u=Math.floor(Math.random()*9e3)+1e3;p("userName",u),p("phoneNumber",e);const h=t(".signUp-input-after"),k=localStorage.getItem("phoneNumber");h.textContent=JSON.parse(k)}}s.addEventListener("click",M);const $=t(".signUp-input-verifyNumber"),m=t(".signUp-errorMsg-second");function F(e){const n=e.target.value;b===n?(m.style.display="none",l(a,"bg-gray-500"),B(a,"bg-tertiary")):(m.style.display="block",m.textContent="인증번호를 제대로 입력해주세요",l(a,"bg-tertiary"),c(a,"bg-gray-500"))}$.addEventListener("input",F);async function R(){Array.from(a.classList).includes("bg-tertiary")?window.location.href="/src/pages/category/":alert("인증번호가 잘못되었습니다.")}a.addEventListener("click",R);const i=t(".signUp-button-Reverify"),T=V(".timer-button");let g=null,f=!1;function X(){const e=t(".target__time"),n=60;f?(clearInterval(g),e.textContent="",y(n,e),N()):y(n,e)}function y(e,n){let r,o;g=setInterval(function(){r=parseInt(e/60,10),o=parseInt(e%60,10),r=r<10?"0"+r:r,o=o<10?"0"+o:o,n.textContent=`${r} : ${o}`,--e<0&&(clearInterval(g),c(i,"bg-gray-500"),c(i,"text-background"),alert("시간초과! 인증번호를 다시 받아주세요 ⏳"),f=!1)},1e3),f=!0}T.forEach(e=>{e.addEventListener("click",X)});function _(){Array.from(i.classList).includes("bg-gray-500")&&Array.from(i.classList).includes("text-background")&&alert(b)}i.addEventListener("click",_);
