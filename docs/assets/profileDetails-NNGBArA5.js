import"./tailwind-zZkDsczm.js";import{g as a,a as l}from"./delay-g6vF19wW.js";import{i as g,r as p}from"./insert-yGrdL5nD.js";import{g as d,s as n}from"./storage-eNv634Ip.js";import{p as b}from"./pocketbase-UOLpUAtS.js";const L=a(".profileDetails-button-close"),u=l(".profileDetails-buttonWrap"),h=a(".profileDetails-jobList-box"),D=l(".profile-button-active");a(".profileDetails-container");const f=l(".profileDtails-agreement-container input"),o=a(".profileDetails-button-submit"),m=a(".profileDetails-checkAll"),v=a(".agree-modal"),y=a(".modal-close"),E=["프론트엔드","백엔드","리액트","풀스택","알고리즘","기초지식","UI디자인","UX디자인","UI/UX","데이터분석","통계분석","시각화"],j=await b.collection("users").getFullList(),k=await d("userId");let A=j.find(e=>e.id===k);function C(){history.back()}L.addEventListener("click",C);function x(){this.nextElementSibling.classList.toggle("hidden")}D.forEach(e=>{e.addEventListener("click",x)});function w(e){Array.from(e.currentTarget.children).forEach(t=>{t.classList.toggle("profileDetails-button-valid"),t.firstElementChild.classList.toggle("hidden")}),B(e)}u.forEach(e=>{e.addEventListener("click",w)});async function B(e){const s=Array.from(e.currentTarget.children),t=Array.from(s[0].classList).includes("profileDetails-button-valid"),i=e.currentTarget.dataset.field;t&&i==="gender"&&n("genderPrivacy","true"),t&&i==="age"?n("agePrivacy","true"):i==="gender"&&!t?n("genderPrivacy","false"):i==="age"&&!t&&n("agePrivacy","false")}async function P(){const e=await d("genderPrivacy"),s=await d("agePrivacy"),t=Array.from(u[0].children),i=Array.from(u[1].children);e==="true"?(t[0].classList.add("profileDetails-button-valid"),t[0].firstElementChild.classList.remove("hidden"),t[1].classList.remove("profileDetails-button-valid"),t[1].firstElementChild.classList.add("hidden")):(t[0].classList.remove("profileDetails-button-valid"),t[0].firstElementChild.classList.add("hidden"),t[1].classList.add("profileDetails-button-valid"),t[1].firstElementChild.classList.remove("hidden")),s==="true"?(i[0].classList.add("profileDetails-button-valid"),i[0].firstElementChild.classList.remove("hidden"),i[1].classList.remove("profileDetails-button-valid"),i[1].firstElementChild.classList.add("hidden")):(i[0].classList.remove("profileDetails-button-valid"),i[0].firstElementChild.classList.add("hidden"),i[1].classList.add("profileDetails-button-valid"),i[1].firstElementChild.classList.remove("hidden"))}P();function S(){let e=0;f.forEach(s=>{s.checked&&e++}),e===4?o.classList.add("profileDetails-buttonAgree-valid"):o.classList.remove("profileDetails-buttonAgree-valid")}f.forEach(e=>{e.addEventListener("change",S)});function V(){m.checked?(f.forEach(e=>{e.checked=!0}),o.classList.add("profileDetails-buttonAgree-valid")):(f.forEach(e=>{e.checked=!1}),o.classList.remove("profileDetails-buttonAgree-valid"))}m.addEventListener("change",V);async function T(e){const s=Array.from(o.classList),t=this.closest("form");if(!s.includes("profileDetails-buttonAgree-valid"))t.addEventListener("submit",c=>{c.preventDefault()}),alert("필수항목에 동의 해주셔야 합니다");else{e.preventDefault();const r={job:(await d("job"))[0]};v.showModal(),await b.collection("users").update(A.id,r)}}o.addEventListener("click",T);y.addEventListener("click",()=>{v.close(),window.location.href="/src/pages/profile/"});function H(){E.forEach(e=>{const s=`
              <button
                class="job-category my-1 bg-Bluelight-200 text-base px-2 py-0.5 rounded-full"
                value= ${e}
              >
                ${e}
              </button>
    `;g(".profileDetails-jobList-box",s)})}a(".jobList-rendering").addEventListener("click",H);async function N(e){e.target.classList.add("job-data");let s=Array.from(l(".job-category")),t=Array.from(l(".job-selected"));if(p(".profileDetails-job-selected"),s.includes(e.target)){let r=`
    <button
  class="job-selected bg-secondary my-1 text-background text-base px-2 py-0.5 rounded-full bg-[url=] mt-1"
  >
  ${e.target.value}x
  </button>
    `;await g(".profileDetails-job-selected",r)}else t.includes(e.target)&&(e.target.remove(e.target),console.log(e.target.textContent.length));const c=Array.from(l(".job-data")).map(r=>r.value);n("job",c)}h.addEventListener("click",N);
