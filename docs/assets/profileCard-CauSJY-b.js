import"./tailwind-xU_d6Hf1.js";import{r,a as i}from"./css-LUmow4Y_.js";import{g as t,a as n}from"./delay-g6vF19wW.js";import{g as l}from"./storage-eNv634Ip.js";import{r as c,a as f}from"./rendering-oARfkKZz.js";import{p as d}from"./pocketbase-UOLpUAtS.js";import"./getPbImageURL-99Z79ldm.js";const p=t(".profileCard-button-close"),u=t(".profileCard-button-edit"),C=t(".profileCard-button-submit"),m=t(".profileCard-button-details"),h=t(".profileCard-button-editClose"),g=t("#avatar");function v(){history.back()}p.addEventListener("click",v);const b=await d.collection("users").getFullList(),k=await l("userId");let o=b.find(a=>a.id===k);c(".rendering-box",o);f(".rendering-photo",o);function E(){Array.from(n(".profile-textPrivacy")).forEach(e=>{let s=`${e.textContent.slice(0,4)}***`;e.textContent=s})}E();function w(){i(".profileCard-area-info","hidden"),i(".profileCard-button-edit","hidden"),r(".profileCard-area-edit","hidden"),r(".profileCard-button-editClose","hidden")}u.addEventListener("click",w);h.addEventListener("click",()=>{r(".profileCard-area-info","hidden"),r(".profileCard-button-edit","hidden"),i(".profileCard-area-edit","hidden"),i(".profileCard-button-editClose","hidden")});const y=Array.from(n(".radio-gender"));function L(){return y.find(e=>e.checked===!0).value}function N(){if(this.files&&this.files[0]){let a=new FileReader;a.onload=function(e){t(".profile-preview").src=e.target.result},a.readAsDataURL(this.files[0])}}g.addEventListener("change",N);async function x(){const a=t("#avatar");try{const e=new FormData;e.append("avatar",a.files[0]),e.append("username",t("#username").value),e.append("nickName",t("#nickName").value),e.append("gender",L()),e.append("age",t("#age").value),e.append("qualification",t("#qualification").value),await d.collection("users").update(o.id,e),alert("수정 완료"),location.href="/src/pages/profileDetails/"}catch{alert("정보를 올바르게 입력해주세요")}}C.addEventListener("click",x);m.addEventListener("click",()=>{location.href="/src/pages/profileDetails/"});
